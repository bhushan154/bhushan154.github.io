<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="description" content="Atlassian Jira Plugin Development Tutorials: Web Item Plugin Tutorial">
	<meta name="keywords" content="jiradev, jira, plugins, bhushan154, tutorials, jira">
	<meta name="author" content="Bhushan Nagaraj">
    
    <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap.min.css" media="screen" />  
	<link rel="icon" type="image/x-icon" href="favicon4.ico">	
	<style type="text/css">
		body { padding-bottom: 70px; padding-top: 70px;}
		.socials {padding-top: 15px; padding-right: 15px; } 
	</style>
    <title>Jiradev.com: Web-item Plugin</title>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>	
	
	<!-- Analytics -->
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-44222850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
	
  </head>

  <body>
	
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
				<div class="navbar-header" style="padding-top: 5px;"><a  href="index.html"><img src="images/jiradevlogo.png" alt="Jiradev.com" max-height="40px"/></a></div>
				
				<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="tutorials.html">Tutorials</a></li>
					<li><a href="aboutme.html">About me</a></li>	
					<li><a href="contact.html">Feedback/Contact</a></li>					
				</ul>
				<ul class="nav navbar-nav pull-right">
					<li class="socials">
						<a href="https://twitter.com/jiradev" class="twitter-follow-button" data-show-count="false">Follow @jiradev</a>
						<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
					</li>
					<li class="socials"><a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="www.jiradev.com" data-text="Check out jiradev.com. It's got simple tutorials for devs new to Jira Development" data-via="jiradev" data-hashtags="JIRA,atlassian">Tweet</a></li>					
				</ul>
				</div>
			</nav>
	
	
    <div class="container">
      <div class="row">
		<div class="col-md-12">
        <div class="page-header"><h1>Web Item Plugin Module</h1></div>
		
			<p>Let us get started with probably the most simple of all plugin modules. The web item plugin module. This allows us to add 
			links in different locations of the JIRA UI. We will add a link to the Atlassian Answers community page from two different locations.</p>
			
			<p><b>Adding a link to the top navigation bar</b></p>
			<p>
				<ol>
					<li>Start by creating a plugin skeleton. If you have not finished 
					the tutorial for creating a plugin skeleton, click <a href="plugin-skeleton.html">here</a>. Enter the information below.
						<p><div class="alert alert-info">
							<p>groupId: com.jiradev.jira.plugins</p>
							<p>artifactId: answers-webitem</p>
							<p>version: 1.0</p>
						</div></p>
					</li>
					<li>
						You should now have a new folder called answers-webitem. Within this folder, execute the command atlas-create-jira-plugin-module.<br /><br />
						<img class="img-thumbnail" src="images/lesson4/choose.png"/><br /><br />
					</li>
					<li>
						Select option 25 for Web-item and enter the info provided below.
						<p>
						<div class="alert alert-info">
							<p>Enter plugin module name: Answers Link From Navigation</p>
							<p>Enter section: system.top.navigation.bar (<a href="https://developer.atlassian.com/display/JIRADEV/User+Accessible+Locations#UserAccessibleLocations-TopNavigationBarLocation">Refer to this link</a>)</p>
							<p>Enter link URL: https://answers.atlassian.com/</p>
							<p>Show advanced setup: N</p>
							<p>Add another plugin module: N</p>
						</div></p>
							<img class="img-thumbnail" src="images/lesson4/details.png"/><br /><br />
					</li>
					<li>Run the JIRA instance using the command atlas-run. You will now see the new link we just created.<br /><br />
							<img class="img-thumbnail" src="images/lesson4/link-without-login.png"/><br /><br /></li>
					<li>But what if we want to make the link visible only to users who are logged in? We can add conditions to web-items. Till
					this point, we did not have to make any changes to code or any of the data generated by Atlas SDK. But from this point on,
					using an IDE will make editing these files much easier. The <a href=""http://www.jetbrains.com/idea/>IntelliJ IDEA IDE</a> 
					has been my preferred IDE as it allows me to easily open projects and setup a remote debugger without any configuration.
					I will be using Idea throughout these tutorials. However, the Atlassian Developer site provides information to setup your IDE
					if you are using Eclipse or Netbeans. Have a look at the link <a href="https://developer.atlassian.com/display/DOCS/Set+Up+the+Eclipse+IDE+for+Windows">here</a>.</li>
				</ol>
				<p><b>Opening your project in IntelliJ Idea IDE</b></p>
				<ol>
					<li>Start the IDE and choose to "Open Project". Choose the pom.xml file from your project directory.
						<br /><br />
							<img class="img-thumbnail" src="images/lesson4/open-pom.png"/><br /><br />
					</li>
					<li>
						Let us take a quick look at the project structure. The src directory contains a folder called main. The main folder 
						contains two folders called java and resources. Java folder will contain all your source code. Resources folder will 
						contain javascript, images and mainly your <b>plugin definition file</b> named atlassian-plugin.xml.<br /><br />
							<img class="img-thumbnail" src="images/lesson4/atlassian-plugin.png"/><br /><br />
					</li>
					<li>Take a look at the atlassian-plugin.xml file. When you ran the atlas-create-jira-plugin-module command, the SDK 
					has created the definition of the web-item here for you.<br /><br />
							<img class="img-thumbnail" src="images/lesson4/original-atlassian-plugin.png"/><br /><br /></li>
					<li>You will also notice several other modules the atlas-create-jira-plugin command would have created as a sample. We do not
					require all these modules to be published as part of our plugin. Let us clean it up and keep only what is required. We are 
					interested only in the plugin-info, the i18N resource file and the web-item definition. 
					Cleanup the atlassian-plugin.xml. Below is a cleaned up version.
						<br /><br />
							<img class="img-thumbnail" src="images/lesson4/clean-atlassian-plugin.png"/><br /><br />
					</li>
				</ol>
			</p>
			
			<p><b>Making some changes to your plugin</b></p>
			<p>
				Great. So we now have an idea about the pom.xml and the atlassian-plugin.xml files. Let us continue making some changes to the 
				web-item we are working on. Firstly, the link is being displayed as "Atlassian link fron navigation". Let us change this to be
				displayed as "Atlassian Answers". Secondly, we will display it only to users who have logged into JIRA.
				<ol>
					<li>Open the atlassian-plugin.xml file and take a look at the web-item definition. The web-item has a label property. 
					These are defined in the file atlassian-webitem.properties file located in your resources folder. Open the properties file
					and look for the key being used by the label. ie, answers-link-from-navigation.label and update it's value to "Atlassian Answers".
					<br /><br />
							<img class="img-thumbnail" src="images/lesson4/props.png"/><br /><br /></li>
					<li>
						Now let us add a condition such that the link is displayed only to logged in users. Open the atlassian-plugin.xml and 
						add the condition. There are several conditions available. Click <a href="https://developer.atlassian.com/static/javadoc/jira/6.0.8/reference/com/atlassian/jira/plugin/webfragment/conditions/package-summary.html">here</a> to take a look.
						<br /><br />
							<img class="img-thumbnail" src="images/lesson4/condition.png"/><br /><br />
					</li>					
				</ol>
			</p>
			
			<p><b>Reloading your changes</b></p>
				<p>Once you have made changes to your plugin, you need to recompile and upload the plugin again. Atlassian SDK provides 
					two ways of doing this. Through the UI using FastDev or through command line using the atlas-cli command.</p>
				<p><u>Using Fastdev</u>				
				<ol>
					<li>On the bottom left corner of your running JIRA instance, you will find an option to expand the developer toolbar.<br /><br />
							<img class="img-thumbnail" src="images/lesson4/dev-tool-1.png"/><br /><br />Click on it to view the developer toolbar.</li>
					<li>On the right hand side of the developer toolbar, you will find the option to "Scan for changes to source code needing a recompile 
					then reload" option. Click to recompile and reload.<br /><br />
							<img class="img-thumbnail" src="images/lesson4/dev-tool-2.png"/><br /><br /></li>
				</ol>
				<p><u>Using command line</u>	
				<ol>
					<li>With the current command prompt where atlas-run is running being open, open a new instance of command prompt and
					change to your project directory.</li>
					<li>Run the atlas-cli command. When prompted with maven>, type "pi" and press enter. <br /><br />
							<img class="img-thumbnail" src="images/lesson4/atlas-cli.png"/><br /><br /></li>
				</ol>
			</p>			
		</div>
	  </div>
	  
	  <hr />
	  <div class="row">
		<div class="col-md-4">
			<div class="alert alert-info">
			<center>
			<h4>Share</h4>
			<hr />
			<p>
				Show your support by tweeting about this tutorial. Is Jiradev something you would reommend? <a href="#" id="recommend">Let me know</a>.
			</p>
			<p>
				<div><a class="btn btn-danger btn-sm" href="https://twitter.com/intent/tweet?screen_name=jiradev&text=Woohoo.%20I%20completed%20the%20web-item%20tutorial%20on%20%40jiradev.%20%23atlassian%2C%20%23JIRA" data-related="jiradev">@jiradev</a></div>
			</p>
			</center>
			</div>
		</div>
		<div class="col-md-4">
			<div class="alert alert-info">
			<center>
				<h4>Contribute</h4>
				<hr />
				<p>Do you have a Jira plugin tutorial that can be used on this site? Please do share it with me and I can add it along with the ones available.
				</p><p><a class="btn btn-danger btn-sm" href="http://jiradev.uservoice.com/knowledgebase/articles/255497">Contribute</a></p>
			</center>
			</div>
		</div>
		<div class="col-md-4">
			<div class="alert alert-info">
			<center>
			<h4>Feedback</h4>
			<hr />
				<p>Your feedback can help improve the content on this site. If you have anything that you would like me to change/implement 
				on the site.</p><p><div><a href="#" id="feedback" class="btn btn-danger btn-sm">Feedback</a></div></p>
			</center>
			</div>
		</div>
	  </div>
	  
    </div>

    <nav class="navbar navbar-default navbar-fixed-bottom">
		<div class="row">
			<div class="col-md-12">
				<p class="text-center">For more information about Jira Plugin Development and Training, contact <a href="mailto:bhushan154@gmail.com">Bhushan Nagaraj</a></p>
			</div>
		</div>
	</nav>
	
	<!-- Satisfaction rating -->
	<script>
// Include the UserVoice JavaScript SDK (only needed once on a page)
UserVoice=window.UserVoice||[];(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/H4Msyrsib8lTi0nIUcNSPg.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();

//
// UserVoice Javascript SDK developer documentation:
// https://www.uservoice.com/o/javascript-sdk
//

// Set colors
UserVoice.push(['set', {
  accent_color: '#e23a39',
  trigger_color: 'white',
  trigger_background_color: 'rgba(46, 49, 51, 0.6)'
}]);

// Identify the user and pass traits
// To enable, replace sample data with actual user traits and uncomment the line
UserVoice.push(['identify', {
  //email:      'john.doe@example.com', // User’s email address
  //name:       'John Doe', // User’s real name
  //created_at: 1364406966, // Unix timestamp for the date the user signed up
  //id:         123, // Optional: Unique id of the user (if set, this should not change)
  //type:       'Owner', // Optional: segment your users by type
  //account: {
  //  id:           123, // Optional: associate multiple users with a single account
  //  name:         'Acme, Co.', // Account name
  //  created_at:   1364406966, // Unix timestamp for the date the account was created
  //  monthly_rate: 9.99, // Decimal; monthly rate of the account
  //  ltv:          1495.00, // Decimal; lifetime value of the account
  //  plan:         'Enhanced' // Plan name for the account
  //}
}]);

// Add default trigger to the bottom-right corner of the window:
UserVoice.push(['addTrigger', { mode: 'satisfaction', trigger_position: 'bottom-right' }]);

// Or, use your own custom trigger:
UserVoice.push(['addTrigger', '#recommend', { mode: 'satisfaction' }]);

// Autoprompt for Satisfaction and SmartVote (only displayed under certain conditions)
UserVoice.push(['autoprompt', {}]);
</script>

<!-- Feedback -->
<script>
// Include the UserVoice JavaScript SDK (only needed once on a page)
UserVoice=window.UserVoice||[];(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/H4Msyrsib8lTi0nIUcNSPg.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();

//
// UserVoice Javascript SDK developer documentation:
// https://www.uservoice.com/o/javascript-sdk
//

// Set colors
UserVoice.push(['set', {
  accent_color: '#e23a39',
  trigger_color: 'white',
  trigger_background_color: 'rgba(46, 49, 51, 0.6)'
}]);

// Identify the user and pass traits
// To enable, replace sample data with actual user traits and uncomment the line
UserVoice.push(['identify', {
  //email:      'john.doe@example.com', // User’s email address
  //name:       'John Doe', // User’s real name
  //created_at: 1364406966, // Unix timestamp for the date the user signed up
  //id:         123, // Optional: Unique id of the user (if set, this should not change)
  //type:       'Owner', // Optional: segment your users by type
  //account: {
  //  id:           123, // Optional: associate multiple users with a single account
  //  name:         'Acme, Co.', // Account name
  //  created_at:   1364406966, // Unix timestamp for the date the account was created
  //  monthly_rate: 9.99, // Decimal; monthly rate of the account
  //  ltv:          1495.00, // Decimal; lifetime value of the account
  //  plan:         'Enhanced' // Plan name for the account
  //}
}]);

// Add default trigger to the bottom-right corner of the window:
//UserVoice.push(['addTrigger', { mode: 'smartvote', trigger_position: 'bottom-right' }]);

// Or, use your own custom trigger:
UserVoice.push(['addTrigger', '#feedback', { mode: 'smartvote' }]);

// Autoprompt for Satisfaction and SmartVote (only displayed under certain conditions)
UserVoice.push(['autoprompt', {}]);
</script>
	
  </body>
</html>